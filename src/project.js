window.__require=function e(o,t,a){function r(i,c){if(!t[i]){if(!o[i]){var u=i.split("/");if(u=u[u.length-1],!o[u]){var s="function"==typeof __require&&__require;if(!c&&s)return s(u,!0);if(n)return n(u,!0);throw new Error("Cannot find module '"+i+"'")}}var l=t[i]={exports:{}};o[i][0].call(l.exports,function(e){return r(o[i][1][e]||e)},l,l.exports,e,o,t,a)}return t[i].exports}for(var n="function"==typeof __require&&__require,i=0;i<a.length;i++)r(a[i]);return r}({Game:[function(e,o,t){"use strict";cc._RF.push(o,"612937Tzv5Mm6AIkSlMp/Bs","Game");var a=this&&this.__extends||function(){var e=function(o,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(o,t)};return function(o,t){function a(){this.constructor=o}e(o,t),o.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),r=this&&this.__decorate||function(e,o,t,a){var r,n=arguments.length,i=n<3?o:null===a?a=Object.getOwnPropertyDescriptor(o,t):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,o,t,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(n<3?r(i):n>3?r(o,t,i):r(o,t))||i);return n>3&&i&&Object.defineProperty(o,t,i),i};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=n.property,u=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.yGround=0,o.score=0,o.timer=0,o.peachDuration=0,o.scoreDisplay=null,o.scoreAudio=null,o.ground=null,o.player=null,o.peachPrefab=null,o.minPeachDuration=0,o.maxPeachDuration=0,o}return a(o,e),o.prototype.onLoad=function(){cc.debug.setDisplayStats(!1),this.yGround=this.ground.y+this.ground.height/2,this.spawnNewPeach()},o.prototype.update=function(e){this.timer>this.peachDuration?this.gameOver():this.timer+=e},o.prototype.gameOver=function(){this.player.stopAllActions(),cc.director.loadScene("game")},o.prototype.increaseScore=function(){this.score++,this.scoreDisplay.string="Score: "+this.score,this.playScoreSound()},o.prototype.spawnNewPeach=function(){var e=cc.instantiate(this.peachPrefab);e.getComponent("Peach").game=this,this.node.addChild(e),e.setPosition(this.calcRandomPosition()),this.peachDuration=this.minPeachDuration+Math.random()*(this.maxPeachDuration-this.minPeachDuration),this.timer=0},o.prototype.calcRandomPosition=function(){var e=this.yGround+Math.random()*this.player.getComponent("Player").jumpHeight+50,o=this.node.width/2,t=2*(Math.random()-.5)*o;return cc.v2(t,e)},o.prototype.playScoreSound=function(){cc.audioEngine.playEffect(this.scoreAudio,!1)},r([c(cc.Label)],o.prototype,"scoreDisplay",void 0),r([c({type:cc.AudioClip})],o.prototype,"scoreAudio",void 0),r([c(cc.Node)],o.prototype,"ground",void 0),r([c(cc.Node)],o.prototype,"player",void 0),r([c(cc.Prefab)],o.prototype,"peachPrefab",void 0),r([c({displayName:"Min Duration"})],o.prototype,"minPeachDuration",void 0),r([c({displayName:"Max Duration"})],o.prototype,"maxPeachDuration",void 0),o=r([i],o)}(cc.Component);t.default=u,cc._RF.pop()},{}],Peach:[function(e,o,t){"use strict";cc._RF.push(o,"687f2mRhaVPvqS7gwhp6v3H","Peach");var a=this&&this.__extends||function(){var e=function(o,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(o,t)};return function(o,t){function a(){this.constructor=o}e(o,t),o.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),r=this&&this.__decorate||function(e,o,t,a){var r,n=arguments.length,i=n<3?o:null===a?a=Object.getOwnPropertyDescriptor(o,t):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,o,t,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(n<3?r(i):n>3?r(o,t,i):r(o,t))||i);return n>3&&i&&Object.defineProperty(o,t,i),i};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=n.property,u=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.game=null,o.pickRadius=0,o}return a(o,e),o.prototype.update=function(e){if(this.getPlayerDistance()<this.pickRadius)this.onPicked();else{var o=1-this.game.timer/this.game.peachDuration;this.node.opacity=10+Math.floor(245*o)}},o.prototype.getPlayerDistance=function(){var e=this.game.player.getPosition();return this.node.position.sub(e).mag()},o.prototype.onPicked=function(){this.game.spawnNewPeach(),this.game.increaseScore(),this.node.destroy()},r([c],o.prototype,"pickRadius",void 0),o=r([i],o)}(cc.Component);t.default=u,cc._RF.pop()},{}],Player:[function(e,o,t){"use strict";cc._RF.push(o,"68503Ye5HxLm7PdPcoCepZv","Player");var a=this&&this.__extends||function(){var e=function(o,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(o,t)};return function(o,t){function a(){this.constructor=o}e(o,t),o.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),r=this&&this.__decorate||function(e,o,t,a){var r,n=arguments.length,i=n<3?o:null===a?a=Object.getOwnPropertyDescriptor(o,t):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,o,t,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(n<3?r(i):n>3?r(o,t,i):r(o,t))||i);return n>3&&i&&Object.defineProperty(o,t,i),i};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=n.property,u=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.speed=0,o.left=!1,o.right=!1,o.playerAction=null,o.jumpAudio=null,o.accel=0,o.maxSpeed=0,o.jumpHeight=0,o.jumpDuration=0,o}return a(o,e),o.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},o.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},o.prototype.start=function(){this.playerAction=this.createPlayerActionInterval(),this.node.runAction(this.playerAction)},o.prototype.update=function(e){this.left?this.speed-=this.accel*e:this.right&&(this.speed+=this.accel*e),Math.abs(this.speed)>this.maxSpeed&&(this.speed=this.maxSpeed*this.speed/Math.abs(this.speed)),this.node.x+=this.speed*e},o.prototype.createPlayerActionInterval=function(){var e=cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),o=cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn());return cc.repeatForever(cc.sequence(e,o))},o.prototype.playJumpSound=function(){cc.audioEngine.playEffect(this.jumpAudio,!1)},o.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.left:case cc.macro.KEY.a:this.left=!0;break;case cc.macro.KEY.right:case cc.macro.KEY.d:this.right=!0}},o.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.left:case cc.macro.KEY.a:this.left=!1,this.playJumpSound();break;case cc.macro.KEY.right:case cc.macro.KEY.d:this.right=!1,this.playJumpSound()}},r([c({type:cc.AudioClip})],o.prototype,"jumpAudio",void 0),r([c],o.prototype,"accel",void 0),r([c],o.prototype,"maxSpeed",void 0),r([c],o.prototype,"jumpHeight",void 0),r([c],o.prototype,"jumpDuration",void 0),o=r([i],o)}(cc.Component);t.default=u,cc._RF.pop()},{}],"js-agora":[function(e,o,t){"use strict";cc._RF.push(o,"1beb4h64qtLWY8y/vEHKMih","js-agora"),window.agora=new cc.EventTarget,agora.startTime=null,"undefined"!=typeof agoraCreator&&(null==agora.agoraCreatorInst&&(agora.agoraCreatorInst=new agoraCreator),agora.init=function(e){agora.agoraCreatorInst.initialize(e),agora.agoraCreatorInst.onJoinChannelSuccess=function(e,o,t){agora.startTime=new Date,cc.log("Agora(Native platform) service start using time : "+agora.startTime.toString()),agora.emit("join-channel-success",e,o,t)},agora.agoraCreatorInst.onRejoinChannelSuccess=function(e,o,t){agora.emit("rejoin-channel-success",e,o,t)},agora.agoraCreatorInst.onWarning=function(e,o){agora.emit("warning",e,o)},agora.agoraCreatorInst.onError=function(e,o){agora.emit("error",e,o)},agora.agoraCreatorInst.onAudioQuality=function(e,o,t,a){agora.emit("audio-quality",e,o,t,a)},agora.agoraCreatorInst.onAudioVolumeIndication=function(e,o,t){agora.emit("audio-volume-indication",e,o,t)},agora.agoraCreatorInst.onLeaveChannel=function(e){var o=new Date;cc.log("Agora(Native platform) service stop use time : "+o.toString());var t=o-agora.startTime;cc.log("Agora(Native platform) service used time(s) \uff1a "+Math.floor(t/1e3)),agora.emit("leave-channel",e)},agora.agoraCreatorInst.onNetworkQuality=function(e,o,t){agora.emit("network-quality",e,o,t)},agora.agoraCreatorInst.onUserJoined=function(e,o){agora.emit("user-joined",e,o)},agora.agoraCreatorInst.onUserOffline=function(e,o){agora.emit("user-offline",e,o)},agora.agoraCreatorInst.onUserMuteAudio=function(e,o){agora.emit("user-mute-audio",e,o)},agora.agoraCreatorInst.onAudioRoutingChanged=function(e){agora.emit("audio-routing-changed",e)},agora.agoraCreatorInst.onConnectionLost=function(){agora.emit("connection-lost")},agora.agoraCreatorInst.onConnectionInterrupted=function(){agora.emit("connection-interrupted")},agora.agoraCreatorInst.onRequestToken=function(){agora.emit("request-token")},agora.agoraCreatorInst.onConnectionBanned=function(){agora.emit("connection-banned")},agora.agoraCreatorInst.onClientRoleChanged=function(e,o){agora.emit("client-role-changed",e,o)}},agora.setChannelProfile=function(e){return agora.agoraCreatorInst.setChannelProfile(e)},agora.setClientRole=function(e){return agora.agoraCreatorInst.setClientRole(e)},agora.joinChannel=function(e,o,t,a){return agora.agoraCreatorInst.joinChannel(e,o,t,a)},agora.leaveChannel=function(){return agora.agoraCreatorInst.leaveChannel()},agora.enableAudio=function(){return agora.agoraCreatorInst.enableAudio()},agora.disableAudio=function(){return agora.agoraCreatorInst.disableAudio()},agora.muteLocalAudioStream=function(e){return agora.agoraCreatorInst.muteLocalAudioStream(e)},agora.enableLocalAudio=function(e){return agora.agoraCreatorInst.enableLocalAudio(e)},agora.muteAllRemoteAudioStreams=function(e){return agora.agoraCreatorInst.muteAllRemoteAudioStreams(e)},agora.muteRemoteAudioStream=function(e,o){return agora.agoraCreatorInst.muteRemoteAudioStream(e,o)},agora.enableAudioVolumeIndication=function(e,o){return agora.agoraCreatorInst.enableAudioVolumeIndication(e,o)},agora.adjustRecordingSignalVolume=function(e){return agora.agoraCreatorInst.adjustRecordingSignalVolume(e)},agora.adjustPlaybackSignalVolume=function(e){return agora.agoraCreatorInst.adjustPlaybackSignalVolume(e)},agora.setDefaultAudioRouteToSpeakerphone=function(e){agora.agoraCreatorInst.setDefaultAudioRouteToSpeakerphone(e)},agora.setParameters=function(e){agora.agoraCreatorInst.setParameters(e)},agora.getVersion=function(){return agora.agoraCreatorInst.getVersion()},agora.setLogFile=function(e){return agora.agoraCreatorInst.setLogFile(e)},agora.setLogFilter=function(e){return agora.agoraCreatorInst.setLogFilter(e)}),"undefined"!=typeof AgoraRTC&&(AgoraRTC.checkSystemRequirements()||alert("Your browser does not support WebRTC!"),null==agora.client&&(agora.client=AgoraRTC.createClient({mode:"live",codec:"h264"})),agora.init=function(e){agora.remoteStreams=[],agora.client.init(e,function(){agora.emit("init-success"),agora.client.on("volume-indicator",function(e){var o=[],t=0;e.attr.forEach(function(e,a){o.push({uid:e.uid,volume:e.level}),t+=e.level}),agora.emit("audio-volume-indication",o,o.length,t/o.length)}),agora.client.on("peer-leave",function(e){if(e.stream){var o=e.stream.getId();e.stream.stop(),agora.remoteStreams=agora.remoteStreams.filter(function(e){return e.getId()!==o})}}),agora.client.on("stream-added",function(e){var o=e.stream;agora.client.subscribe(o,function(e){agora.emit("error",e,"Subscribe stream failed")}),agora.emit("user-joined",o.getId(),null)}),agora.client.on("stream-subscribed",function(e){var o=e.stream;console.log("Subscribe remote stream successfully: "+o.getId()),agora.remoteStreams.push(o),o.play("Cocos2dGameContainer")}),agora.client.on("stream-removed",function(e){if(e.stream){var o=e.stream.getId();e.stream.stop(),agora.remoteStreams=agora.remoteStreams.filter(function(e){return e.getId()!==o}),agora.emit("user-offline",stream.getId(),null)}}),agora.client.on("mute-audio",function(e){agora.emit("user-mute-audio",e.uid,!0)}),agora.client.on("unmute-audio",function(e){agora.emit("user-mute-audio",e.uid,!1)}),agora.client.on("recordingDeviceChanged",function(e){agora.emit("recording-device-changed",e.state,e.device)}),agora.client.on("onTokenPrivilegeWillExpire",function(){agora.emit("request-token")}),agora.client.on("client-banned",function(e){agora.emit("connection-interrupted")}),agora.client.on("client-role-changed",function(e){agora.emit("client-role-changed",e.role)}),agora.client.on("error",function(e){agora.emit("error",e,e.reason)})},function(e){agora.emit("error",e,"client init failed!")})},agora.setChannelProfile=function(e){cc.log("web not support")},agora.setClientRole=function(e){agora.stream.setClientRole(e)},agora.joinChannel=function(e,o,t,a){agora.client.join(e,o,a,function(e){null==agora.stream&&(agora.stream=AgoraRTC.createStream({streamID:e,audio:!0,video:!1,screen:!1})),agora.stream.init(function(){console.log("getUserMedia successfully"),agora.stream.play("Cocos2dGameContainer"),agora.client.publish(agora.stream,function(e){console.log("Publish local stream error: "+e)}),agora.client.on("stream-published",function(e){console.log("Publish local stream successfully")})},function(e){console.log("getUserMedia failed",e)}),console.log("create stream!"),agora.startTime=new Date,cc.log("Agora(Web platform) service start using time : "+agora.startTime.toString()),agora.emit("join-channel-success",o,e,null)},function(e){agora.emit("error",e,"join channel failed!")})},agora.leaveChannel=function(){agora.client.leave(function(){var e=new Date;cc.log("Agora(Web platform) service stop use time : "+e.toString());var o=e-agora.startTime;cc.log("Agora(Web platform) service used time(s) \uff1a "+Math.floor(o/1e3)),agora.emit("leave-channel",null),agora.stream.close(),agora.stream=null},function(e){agora.emit("error",e,"leave channel failed!")})},agora.enableAudio=function(){agora.stream.unmuteAudio()},agora.disableAudio=function(){agora.stream.muteAudio()},agora.muteLocalAudioStream=function(e){e?agora.stream.disableAudio():agora.stream.enableAudio()},agora.enableLocalAudio=function(e){var o=agora.stream.getAudioTrack();e?agora.stream.addTrack(o):agora.stream.removeTrack(o)},agora.muteAllRemoteAudioStreams=function(e){agora.remoteStreams.forEach(function(o){e?o.muteAudio():o.unmuteAudio()})},agora.muteRemoteAudioStream=function(e,o){agora.remoteStreams.forEach(function(t){e===t.getId()&&(o?t.muteAudio():t.unmuteAudio())})},agora.enableAudioVolumeIndication=function(e,o){agora.client.enableAudioVolumeIndicator()},agora.adjustRecordingSignalVolume=function(e){cc.log("web not support")},agora.adjustPlaybackSignalVolume=function(e){cc.log("web not support")},agora.setDefaultAudioRouteToSpeakerphone=function(e){cc.log("web not support")},agora.setParameters=function(e){cc.log("web not support")},agora.getVersion=function(){return AgoraRTC.VERSION},agora.setLogFile=function(e){cc.log("web not support")},agora.setLogFilter=function(e){AgoraRTC.logger.setLogLevel(e)}),"undefined"==typeof agoraCreator&&"undefined"==typeof AgoraRTC&&(agora.init=function(e){},agora.setChannelProfile=function(e){},agora.setClientRole=function(e){},agora.joinChannel=function(e,o,t,a){},agora.leaveChannel=function(){},agora.enableAudio=function(){},agora.disableAudio=function(){},agora.muteLocalAudioStream=function(e){},agora.enableLocalAudio=function(e){},agora.muteAllRemoteAudioStreams=function(e){},agora.muteRemoteAudioStream=function(e,o){},agora.enableAudioVolumeIndication=function(e,o){},agora.adjustRecordingSignalVolume=function(e){},agora.adjustPlaybackSignalVolume=function(e){},agora.setDefaultAudioRouteToSpeakerphone=function(e){},agora.setParameters=function(e){},agora.getVersion=function(){},agora.setLogFile=function(e){},agora.setLogFilter=function(e){}),cc._RF.pop()},{}]},{},["js-agora","Game","Peach","Player"]);