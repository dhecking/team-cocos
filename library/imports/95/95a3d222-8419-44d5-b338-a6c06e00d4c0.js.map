{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\cases\\3d/assets\\cases\\3d\\mesh-texture.js"],"names":["gfx","cc","Class","extends","Component","editor","executeInEditMode","properties","speed","start","vfmt","VertexFormat","name","ATTR_POSITION","type","ATTR_TYPE_FLOAT32","num","ATTR_UV0","mesh","Mesh","init","vertexes","v2","setVertices","setIndices","renderer","node","getComponent","MeshRenderer","addComponent","update","dt","CC_EDITOR","lm","rm","x"],"mappings":"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","file":"mesh-texture.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\cases\\3d","sourcesContent":["\nlet gfx = cc.gfx;\n\ncc.Class({\n    extends: cc.Component,\n    editor: {\n        executeInEditMode: true\n    },\n\n    properties: {\n        speed: 50\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        var vfmt = new gfx.VertexFormat([\n            { name: gfx.ATTR_POSITION, type: gfx.ATTR_TYPE_FLOAT32, num: 2 },\n            { name: gfx.ATTR_UV0, type: gfx.ATTR_TYPE_FLOAT32, num: 2 },\n        ]);\n        \n        let mesh = new cc.Mesh();\n        mesh.init(vfmt, 9, true);\n        this.mesh = mesh;\n        \n        this.vertexes = [\n            cc.v2(-100, 100), cc.v2(0, 100), cc.v2(100, 100),\n            cc.v2(-100, 0), cc.v2(0, 0), cc.v2(100, 0),\n            cc.v2(-100, -100), cc.v2(0, -100), cc.v2(100, -100)\n        ];\n\n        mesh.setVertices(gfx.ATTR_POSITION, this.vertexes);\n\n        mesh.setVertices(gfx.ATTR_UV0, [\n            cc.v2(0,0), cc.v2(0.5,0), cc.v2(1, 0),\n            cc.v2(0,0.5), cc.v2(0.5,0.5), cc.v2(1,0.5),\n            cc.v2(0, 1), cc.v2(0.5, 1), cc.v2(1, 1),\n        ]);\n\n        mesh.setIndices([\n            0, 1, 3, 1, 4, 3,\n            1, 2, 4, 2, 5, 4,\n            3, 4, 6, 4, 7, 6,\n            4, 5, 7, 5, 8, 7\n        ]);\n\n        let renderer = this.node.getComponent(cc.MeshRenderer);\n        if (!renderer) {\n            renderer = this.node.addComponent(cc.MeshRenderer);\n        }\n        renderer.mesh = mesh;\n        this.mesh = mesh;\n    },\n\n    update (dt) {\n        if (CC_EDITOR) return;\n        \n        let lm = this.vertexes[3];\n        let rm = this.vertexes[5];\n        if ((lm.x < -200 && this.speed < 0) || (lm.x > 0 && this.speed > 0)) {\n            this.speed *= -1;\n        }\n        lm.x += dt * this.speed;\n        rm.x += -dt * this.speed;\n\n        this.mesh.setVertices(gfx.ATTR_POSITION, this.vertexes);\n    },\n});\n"]}