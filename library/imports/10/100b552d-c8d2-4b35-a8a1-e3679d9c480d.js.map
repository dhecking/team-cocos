{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\cases\\02_ui\\09_videoplayer/assets\\cases\\02_ui\\09_videoplayer\\VideoPlayerCtrl.js"],"names":["i18n","require","TipsManager","getStatus","event","cc","VideoPlayer","EventType","PLAYING","PAUSED","STOPPED","COMPLETED","META_LOADED","CLICKED","READY_TO_PLAY","Class","extends","Component","properties","videoPlayer","statusLabel","Label","currentTime","resSwitchBtnLabel","controlButtons","Node","keep_Ratio_Switch","playVideoArea","visibility","start","init","active","sys","isBrowser","platform","WECHAT_GAME","on","play","onVideoPlayerEvent","sender","string","isPlaying","pause","toggleFullscreen","browserType","BROWSER_TYPE_MOBILE_QQ","browserVersion","test","navigator","userAgent","createTips","t","log","isFullscreen","toggleVisibility","node","keepRatioSwitch","keepAspectRatio","switchOnlineVideo","remoteURL","resourceType","ResourceType","REMOTE","switchLoaclVide","LOCAL","stop","update","toFixed","getDuration"],"mappings":"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","file":"VideoPlayerCtrl.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\cases\\02_ui\\09_videoplayer","sourcesContent":["const i18n = require('i18n');\nconst TipsManager = require('TipsManager');\n\nfunction getStatus (event) {\n    switch (event) {\n        case cc.VideoPlayer.EventType.PLAYING:\n            return 'PLAYING';\n        case cc.VideoPlayer.EventType.PAUSED:\n            return 'PAUSED';\n        case cc.VideoPlayer.EventType.STOPPED:\n            return 'STOPPED';\n        case cc.VideoPlayer.EventType.COMPLETED:\n            return 'COMPLETED';\n        case cc.VideoPlayer.EventType.META_LOADED:\n            return 'META_LOADED';\n        case cc.VideoPlayer.EventType.CLICKED:\n            return 'CLICKED';\n        case cc.VideoPlayer.EventType.READY_TO_PLAY:\n            return 'READY_TO_PLAY';\n        default:\n            return 'NONE';\n    }\n};\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        videoPlayer: cc.VideoPlayer,\n        statusLabel: cc.Label,\n        currentTime: cc.Label,\n        resSwitchBtnLabel: cc.Label,\n        controlButtons: cc.Node,\n        keep_Ratio_Switch: cc.Node,\n        playVideoArea: cc.Node,\n        visibility: cc.Label,\n    },\n\n    start () {\n        TipsManager.init();\n        this.controlButtons.active = false;\n        this.keep_Ratio_Switch.active = !(cc.sys.isBrowser || cc.sys.platform === cc.sys.WECHAT_GAME);\n        this.playVideoArea.on('touchend', () => {\n            this.videoPlayer.play();\n        });\n    },\n\n    onVideoPlayerEvent (sender, event) {\n        this.statusLabel.string = 'Status: ' + getStatus(event);\n        if (event === cc.VideoPlayer.EventType.CLICKED) {\n            if (this.videoPlayer.isPlaying()) {\n                this.videoPlayer.pause();\n            } else {\n                this.videoPlayer.play();\n            }\n        }\n        else if (event === cc.VideoPlayer.EventType.READY_TO_PLAY || event === cc.VideoPlayer.EventType.META_LOADED) {\n            this.controlButtons.active = true;\n            this.playVideoArea.active = true;\n        }\n        else if (event === cc.VideoPlayer.EventType.PLAYING) {\n            this.playVideoArea.active = false;\n        }\n    },\n\n    toggleFullscreen () {\n        if (\n            cc.sys.isBrowser &&\n            cc.sys.browserType === cc.sys.BROWSER_TYPE_MOBILE_QQ &&\n            cc.sys.browserVersion <= 7.2 &&\n            /Nexus 6/.test(navigator.userAgent)\n        ) {\n            TipsManager.createTips(i18n.t('cases/02_ui/09_videoplayer/videoPlayer.nonsupport_fullscreen'));\n            return cc.log('May be crash, so prohibit full screen');\n        }\n        this.videoPlayer.isFullscreen = true;\n    },\n\n    toggleVisibility (event) {\n        this.videoPlayer.node.active = !this.videoPlayer.node.active;\n        this.playVideoArea.active = this.videoPlayer.node.active;\n        this.visibility.string = 'Visibility: ' + this.videoPlayer.node.active;\n    },\n\n    keepRatioSwitch () {\n        this.videoPlayer.keepAspectRatio = !this.videoPlayer.keepAspectRatio;\n    },\n\n    switchOnlineVideo () {\n        this.videoPlayer.remoteURL = 'http://www.w3school.com.cn/i/movie.mp4';\n        this.videoPlayer.resourceType = cc.VideoPlayer.ResourceType.REMOTE;\n        this.playVideoArea.active = true;\n    },\n\n    switchLoaclVide () {\n        this.videoPlayer.resourceType = cc.VideoPlayer.ResourceType.LOCAL;\n        this.playVideoArea.active = true;\n    },\n\n    play () {\n        this.videoPlayer.play();\n        this.playVideoArea.active = false;\n    },\n\n    pause () {\n        this.videoPlayer.pause();\n    },\n\n    stop () {\n        this.videoPlayer.stop();\n    },\n\n    update () {\n        if (this.currentTime && this.videoPlayer.currentTime >= 0) {\n            this.currentTime.string = this.videoPlayer.currentTime.toFixed(2) + ' / ' + this.videoPlayer.getDuration().toFixed(2);\n        }\n    }\n\n});\n"]}