{"version":3,"sources":["BasicEventCtrl.js"],"names":["TipsManager","require","cc","Class","extends","Component","properties","basicNode","Node","preNode","childNode","tip","Label","start","init","changePosition","resetNode","positionChanged","string","on","EventType","POSITION_CHANGED","x","y","off","changeScale","scaleChanged","SCALE_CHANGED","scaleX","scaleY","changeSize","sizeChanged","oldSize","SIZE_CHANGED","width","height","changeAnchor","anchorChanged","ANCHOR_CHANGED","anchorX","anchorY","changeColor","colorChanged","COLOR_CHANGED","color","Color","addingChild","childAdded","child","getChildrenContent","console","log","CHILD_ADDED","children","length","createTips","addChild","removingChild","resetChildNode","childRemoved","CHILD_REMOVED","removeChild","reorderChild","childReordered","parent","CHILD_REORDER","zIndex","sortAllChildren","changeGroup","groupChanged","node","group","GROUP_CHANGED","i","name","str","sort","a","b","tempObj"],"mappings":"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","file":"BasicEventCtrl.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\cases\\05_scripting\\03_events\\BasicEventTest","sourcesContent":["\nconst TipsManager = require('TipsManager');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        basicNode: cc.Node,\n        preNode: cc.Node,\n        childNode: cc.Node,\n        tip: cc.Label\n    },\n\n    start () {\n        TipsManager.init();\n    },\n\n    changePosition () {\n        this.resetNode();\n        function positionChanged () {\n            this.tip.string = 'Position_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.POSITION_CHANGED, positionChanged, this);\n        this.basicNode.x -= 40;\n        this.basicNode.y += 10;\n        this.basicNode.off(cc.Node.EventType.POSITION_CHANGED, positionChanged, this);\n    },\n\n    changeScale () {\n        this.resetNode();\n        function scaleChanged () {\n            this.tip.string = 'Scale_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.SCALE_CHANGED, scaleChanged, this);\n        this.basicNode.scaleX += 0.2;\n        this.basicNode.scaleY += 0.2;\n        this.basicNode.off(cc.Node.EventType.POSITION_CHANGED, scaleChanged, this);\n    },\n\n    changeSize () {\n        this.resetNode();\n        // The oldSize only available in editor\n        function sizeChanged (oldSize) {\n            this.tip.string = 'Size_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.SIZE_CHANGED, sizeChanged, this);\n        this.basicNode.width += 100;\n        this.basicNode.height += 100;\n        this.basicNode.off(cc.Node.EventType.SIZE_CHANGED, sizeChanged, this);\n    },\n\n    changeAnchor () {\n        this.resetNode();\n        function anchorChanged () {\n            this.tip.string = 'Anchor_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.ANCHOR_CHANGED, anchorChanged, this);\n        this.basicNode.anchorX -= 0.05;\n        this.basicNode.anchorY -= 0.1;\n        this.basicNode.off(cc.Node.EventType.ANCHOR_CHANGED, anchorChanged, this);\n    },\n\n    changeColor () {\n        this.resetNode();\n        function colorChanged () {\n            this.tip.string = 'Color_changed successd';\n        }\n        this.basicNode.on(cc.Node.EventType.COLOR_CHANGED, colorChanged, this);\n        this.basicNode.color = new cc.Color(100, 100, 100);\n        this.basicNode.off(cc.Node.EventType.COLOR_CHANGED, colorChanged, this);\n    },\n\n    addingChild () {\n        function childAdded (child) {\n            this.tip.string = `Add_child successd\\n zIndex order: ${this.getChildrenContent()}`;\n            console.log(child);\n        }\n        this.preNode.on(cc.Node.EventType.CHILD_ADDED, childAdded, this);\n        if (this.preNode.children.length !== 2) {\n            TipsManager.createTips(`Only support when there is 2 stars existing`);\n            return;\n        }\n        this.preNode.addChild(this.childNode);\n        this.preNode.off(cc.Node.EventType.CHILD_ADDED, childAdded, this);\n    },\n\n    removingChild () {\n        this.resetChildNode();\n        function childRemoved (child) {\n            this.tip.string = `Remove_child successd\\n zIndex order: ${this.getChildrenContent()}`;\n            console.log(child);\n        }\n        this.preNode.on(cc.Node.EventType.CHILD_REMOVED, childRemoved, this);\n        if (this.preNode.children.length !== 3) {\n           TipsManager.createTips(`Only support when there is 3 stars existing`);\n           return;\n        }\n        this.preNode.removeChild(this.childNode);\n        this.preNode.off(cc.Node.EventType.CHILD_REMOVED, childRemoved, this);\n    },\n\n    reorderChild () {\n        this.resetChildNode();\n        function childReordered (parent) {\n            this.tip.string = `Reorder_child successd\\n zIndex order: ${this.getChildrenContent()}`;\n            console.log(parent);\n        }\n        this.preNode.on(cc.Node.EventType.CHILD_REORDER, childReordered, this);\n        this.preNode.children[0].zIndex = 10;\n        this.preNode.sortAllChildren();\n        this.preNode.off(cc.Node.EventType.CHILD_REORDER, childReordered, this);\n    },\n\n    changeGroup () {\n        this.resetNode();\n        function groupChanged (node) {\n            this.tip.string = `Group_changed successd: ${this.basicNode.group}`;\n            console.log(node);\n        }\n        this.basicNode.on(cc.Node.EventType.GROUP_CHANGED, groupChanged, this);\n        this.basicNode.group = 'Collider';\n        this.basicNode.off(cc.Node.EventType.GROUP_CHANGED, groupChanged, this);\n    },\n\n    resetNode () {\n        this.basicNode.x = -200;\n        this.basicNode.y = 75;\n        this.basicNode.scaleX = 1\n        this.basicNode.scaleY = 1;\n        this.basicNode.width = 256;\n        this.basicNode.height = 256;\n        this.basicNode.anchorX = 0.5;\n        this.basicNode.anchorY = 0.5;\n        this.basicNode.color = new cc.Color(255, 255, 255);\n        this.basicNode.group = 'Default';\n    },\n\n    resetChildNode () {\n        let children = this.preNode.children;\n        for (let i = 0; i < children.length; i++) {\n            switch (children[i].name) {\n                case 'star1':\n                    children[i].zIndex = 0;\n                    break;\n                case 'star2':\n                    children[i].zIndex = 1;\n                    break;\n                case 'star3':\n                    children[i].zIndex = 2;\n                    break;\n            }\n        }\n        this.preNode.sortAllChildren();\n    },\n\n    getChildrenContent () {\n        let str = '';\n        let children = this.preNode.children.sort((a, b) => {\n            return a.zIndex - b.zIndex;\n        });\n\n        let tempObj = children[0];\n        for (let i = 0; i < children.length; i++) {\n            let child = children[i];\n            if (child.zIndex > tempObj.zIndex) {\n                tempObj = child;\n            }\n            str += `${child.name} `;\n            child.color = new cc.Color(255, 255, 255);\n        }\n        tempObj.color = new cc.Color(255, 0, 0);\n        return str;\n    }\n});\n"]}